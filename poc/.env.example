# RAG対応版 LISA環境変数テンプレート

# ====================
# Google Cloud関連
# ====================
# Gemini API キー（必須）
GEMINI_API_KEY=your-gemini-api-key-here

# Gemini モデル (Generative Language API、オプション、デフォルト: gemini-2.5-pro )
#   gemini-2.5-pro                - 最高品質の推論能力（フラッグシップ）
#   gemini-2.5-flash              - 推奨: 価格とパフォーマンスのベストバランス
#   gemini-2.5-flash-lite         - 最高速・最低コスト
#   gemini-2.5-flash-preview-09-2025           - 価格とパフォーマンスのベストバランスの最新版
#   gemini-2.5-flash-lite-preview-09-2025  - 最高速・最低コストの最新版
GEMINI_MODEL=gemini-2.5-pro

# ====================
# プロジェクト設定
# ====================
# プロジェクトとデータソースの設定は project_config.yaml で管理します
# 詳細は project_config.yaml.sample を参照してください

# RAG専用モード時の検索パラメータ
# より多くのドキュメントを取得するため、通常モードより大きな値を設定
RAG_ONLY_MODE_K_CURRENT=15        # 現在のプロジェクトから取得する最大件数
RAG_ONLY_MODE_K_SIMILAR=15        # 類似プロジェクトから取得する最大件数
RAG_ONLY_MODE_MAX_TOTAL=30        # 合計最大件数
RAG_ONLY_MODE_MIN_SCORE=0.3       # RAG専用モード時の最小類似度スコア（通常より緩い基準）

# ====================
# AWS S3 Vectors関連（RAG機能）
# ====================
EMBEDDING_MODEL=gemini-embedding-001
DIMENSION=1536

# AWSリージョン（S3 Vectorsプレビュー対応リージョン）
# 対応リージョン: us-west-2, us-east-1, us-east-2, eu-central-1, ap-southeast-2
AWS_REGION=us-west-2

# S3ベクトルバケット名（自動作成される）
VECTOR_BUCKET_NAME=lisa-poc-vectors

# ベクトルインデックス名
VECTOR_INDEX_NAME=project-documents

# AWS CLIプロファイル（オプション）
# 複数のAWSアカウントを使用している場合に指定
# AWS_PROFILE=your-profile-name

# ベクトル距離計算メトリック（cosine または euclidean、デフォルト: cosine）
VECTOR_DISTANCE_METRIC=cosine

# RAG検索の最小類似度スコア（0.0-1.0、デフォルト: 0.6）
# この値以上の類似度を持つドキュメントのみを検索結果に含める
# 値を高くするとハルシネーションが減るが、関連情報も減る可能性がある
RAG_MIN_SCORE=0.6

# ========================================
# RAG-Fusion設定
# ========================================

# RAG-Fusionを有効化（true/false）
USE_RAG_FUSION=true

# 生成するクエリ数（デフォルト: 3）
RAG_FUSION_NUM_QUERIES=3

# RRFパラメータ（デフォルト: 60）
# 値が大きいほど、順位の差を小さく扱う
RAG_FUSION_RRF_K=60

# ========================================
# ハイブリッドスコアリング設定
# ========================================

# スコアリング方式
# - hybrid: 類似度と時間スコアを重み付け統合（推奨）
# - time_decay: 類似度に時間減衰を乗算
# - reranking: 類似度で検索後、時間でソート
# - none: 類似度のみ
RAG_SCORING_METHOD=hybrid

# 時間スコアの重み（0.0-1.0、デフォルト: 0.2）
# 0.2 = 類似度80% + 時間20%
RAG_TIME_WEIGHT=0.2

# 時間減衰の半減期（日数、デフォルト: 90）
# 90日経過で時間スコアが50%に減衰
RAG_DECAY_DAYS=90

# 最小類似度スコア（0.0-1.0、デフォルト: 0.3）
RAG_ONLY_MODE_MIN_SCORE=0.3

# ========================================
# k値設定（取得件数）
# ========================================

# 現在のプロジェクトから取得する件数
RAG_ONLY_MODE_K_CURRENT=30

# 類似プロジェクトから取得する件数
RAG_ONLY_MODE_K_SIMILAR=30

# 合計最大件数
RAG_ONLY_MODE_MAX_TOTAL=60

# ====================
# 開発/デバッグ設定
# ====================
# ログレベル（DEBUG, INFO, WARNING, ERROR）
LOG_LEVEL=INFO

# 一時ファイルディレクトリ
TEMP_DIR=temp_files

# 出力ディレクトリ
OUTPUT_DIR=outputs
