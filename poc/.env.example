# RAG対応版 LISA環境変数テンプレート

# ====================
# Google Cloud関連
# ====================
# Gemini API キー（必須）
GEMINI_API_KEY=your-gemini-api-key-here

# Gemini モデル (Generative Language API、オプション、デフォルト: gemini-2.5-flash)
#   gemini-2.5-pro                - 最高品質の推論能力（フラッグシップ）
#   gemini-2.5-flash              - 推奨: 価格とパフォーマンスのベストバランス
#   gemini-2.5-flash-lite         - 最高速・最低コスト
#   gemini-2.5-flash-preview-09-2025           - 価格とパフォーマンスのベストバランスの最新版
#   gemini-2.5-flash-lite-preview-09-2025  - 最高速・最低コストの最新版
GEMINI_MODEL=gemini-2.5-flash

# 案件情報フォルダのID (Google Drive)
# Google Driveで「案件情報」フォルダを開き、URLから取得
# https://drive.google.com/drive/folders/XXXXXXXXXX ← この部分
PROJECTS_FOLDER_ID=your-projects-folder-id

# Google Drive一時フォルダID（オプション）
# MS Office→PDF変換時の一時ファイル保存先
GOOGLE_DRIVE_TEMP_FOLDER_ID=

# 処理対象プロジェクト名（カンマ区切り、* で全て）
PROJECT_NAMES=*

# 変換モード（cloud_pdf または text）
CONVERSION_MODE=cloud_pdf

# RAG専用モード（true/false、デフォルト: true）
# trueに設定すると個別ファイル分析をスキップし、RAGインデックスのみから生成
# falseに設定すると従来通り個別ファイル分析後にRAGで強化
USE_RAG_ONLY_MODE=true

# RAG専用モード時の検索パラメータ
# より多くのドキュメントを取得するため、通常モードより大きな値を設定
RAG_ONLY_MODE_K_CURRENT=15        # 現在のプロジェクトから取得する最大件数
RAG_ONLY_MODE_K_SIMILAR=15        # 類似プロジェクトから取得する最大件数
RAG_ONLY_MODE_MAX_TOTAL=30        # 合計最大件数
RAG_ONLY_MODE_MIN_SCORE=0.3       # RAG専用モード時の最小類似度スコア（通常より緩い基準）

# ====================
# AWS S3 Vectors関連（RAG機能）
# ====================
# RAG機能の有効/無効（true/false、デフォルト: true）
# falseに設定するとRAG検索をスキップし、従来の分析のみ実行
USE_RAG=true

# AWSリージョン（S3 Vectorsプレビュー対応リージョン）
# 対応リージョン: us-west-2, us-east-1, us-east-2, eu-central-1, ap-southeast-2
AWS_REGION=us-west-2

# S3ベクトルバケット名（自動作成される）
VECTOR_BUCKET_NAME=lisa-poc-vectors

# ベクトルインデックス名
VECTOR_INDEX_NAME=project-documents

# AWS CLIプロファイル（オプション）
# 複数のAWSアカウントを使用している場合に指定
# AWS_PROFILE=your-profile-name

# ベクトル距離計算メトリック（cosine または euclidean、デフォルト: cosine）
VECTOR_DISTANCE_METRIC=cosine

# RAG検索の最小類似度スコア（0.0-1.0、デフォルト: 0.6）
# この値以上の類似度を持つドキュメントのみを検索結果に含める
# 値を高くするとハルシネーションが減るが、関連情報も減る可能性がある
RAG_MIN_SCORE=0.6

# ====================
# RAG時系列重み付け設定
# ====================
# RAG検索結果のスコアリング方式（hybrid/reranking/time_decay/none、デフォルト: hybrid）
#   hybrid      - 類似度と時間スコアを重み付けして統合（バランス型）
#   reranking   - 類似度検索後、時間でソート（新しさ優先）
#   time_decay  - 類似度に時間減衰を適用（類似度×減衰係数）
#   none        - 時系列重み付けなし（類似度のみ）
RAG_SCORING_METHOD=hybrid

# ハイブリッド方式での時間の重み（0.0-1.0、デフォルト: 0.2）
# 0.0 = 類似度のみ、1.0 = 時間のみ、0.2 = 類似度80%・時間20%
# 値を大きくすると新しいドキュメントがより優先される
RAG_TIME_WEIGHT=0.2

# 時間減衰の半減期（日数、デフォルト: 90）
# この日数経過後、時間スコアが約50%に減衰
# 値を小さくすると古いドキュメントの重要性が急速に低下
RAG_DECAY_DAYS=90

# ====================
# 開発/デバッグ設定
# ====================
# ログレベル（DEBUG, INFO, WARNING, ERROR）
LOG_LEVEL=INFO

# 一時ファイルディレクトリ
TEMP_DIR=temp_files

# 出力ディレクトリ
OUTPUT_DIR=outputs
